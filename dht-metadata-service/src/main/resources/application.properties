# Spring Boot配置
spring.application.name=dht-metadata-service
server.port=8082

# 数据库配置
spring.datasource.url=jdbc:postgresql://localhost:5433/dht_spider
spring.datasource.username=dht_user
spring.datasource.password=dht_pass
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA配置
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

# Redis配置
spring.data.redis.host=localhost
spring.data.redis.port=6380
spring.data.redis.password=
spring.data.redis.database=0

# 去重配置（Bloom Filter）
dedup.enabled=true
dedup.bloom.key=dht:bloom:persisted

# Kafka配置
spring.kafka.bootstrap-servers=${KAFKA_BOOTSTRAP_SERVERS:localhost:9092}
spring.kafka.consumer.group-id=dht-metadata-service
spring.kafka.consumer.auto-offset-reset=earliest
spring.kafka.consumer.enable-auto-commit=false
spring.kafka.consumer.max-poll-records=100
spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer
spring.kafka.consumer.value-deserializer=org.apache.kafka.common.serialization.StringDeserializer

# Kafka主题订阅
kafka.topic.metadata=${KAFKA_METADATA_TOPIC:dht.metadata.fetched}
## 失败主题（BT Client -> Metadata Service）
kafka.topic.metadata.failed=${KAFKA_METADATA_FAILED_TOPIC:dht.metadata.failed}

# Optional: ease troubleshooting consumer startup/assignment
logging.level.org.springframework.kafka=INFO

# 日志配置
logging.level.root=INFO
logging.level.cn.lihongjie.dht=DEBUG
logging.file.name=logs/metadata-service.log
